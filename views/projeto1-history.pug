doctype html
html(lang="pt-BR")
  head
    title Hist√≥rico de Animais - Monitoramento
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    link(rel="stylesheet" href="/css/design-system.css")
    link(rel="stylesheet" href="/css/projeto1.css")
    
    include ./partials/styles.pug
    
  body
    // Animated background
    .glass-background
    
    // Glass navigation
    header.glass-navbar
      .container
        a.glass-logo(href="/")
          span Projetos IOT
        nav.nav-right
          if user
            button.profile-button(type="button")
              img.profile-photo(
                src=user.avatarUrl || '/img/default-avatar.png'
                alt=`${user.username}`
              )
              span.username #{user.username}

    // Main content container
    .projeto1-container
      .container
        .page-header
          h1.page-title Hist√≥rico Completo de Animais
          p.page-subtitle Registro completo de todos os animais cadastrados no sistema
          
          .nav-actions
            a.glass-button-secondary(href="/projeto1")
              span ‚Üê Voltar ao Projeto 1

        // History content
        .history-content
          .glass-card.history-card
            .card-header
              h3.card-title 
                span.icon üìä
                span Hist√≥rico Completo (#{registros.length} registros)
            
            .card-content
              if registros.length
                .history-table
                  .table-header
                    .col ID
                    .col Status
                    .col Peso
                    .col Atualizado
                    .col Cadastrado por
                    .col Data
                  
                  .table-body
                    each registro in registros
                      .table-row
                        .col #{registro.identifier}
                        .col
                          .status-badge(class=registro.allowed === 'sim' ? 'status-allowed' : 'status-denied')
                            #{registro.allowed === 'sim' ? 'Permitido' : 'Negado'}
                        .col #{registro.peso || 'N/A'}
                        .col
                          if registro.dataPesoAtualizado && registro.dataPesoAtualizado !== 'N√£o atualizado'
                            small #{new Date(registro.dataPesoAtualizado).toLocaleString("pt-BR")}
                          else
                            small.text-muted N√£o atualizado
                        .col #{registro.registradoPor || 'N/A'}
                        .col
                          if registro.data
                            small #{new Date(registro.data).toLocaleString("pt-BR")}
                          else
                            small.text-muted N/A
              else
                .empty-state
                  .empty-icon üìà
                  .empty-title Nenhum registro encontrado
                  .empty-subtitle O hist√≥rico aparecer√° aqui conforme animais forem cadastrados

    // Incluir o card de configura√ß√µes do usu√°rio
    if user
      include ../components/user-settings/settings.pug

    script(src="/components/user-settings/settings.js")
