doctype html
html(lang="pt-BR")
  head
    title Cadastro de Animal
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css")
    link(rel="stylesheet" href="/custom.css")
  body
    // Barra de navegação
    header.navbar.bg-dark.p-3.mb-4
      .container.d-flex.justify-content-between.align-items-center
        a.logo-text(href="/")
          span.text-white Projetos IOT
        if user
          span.text-white.small Logado como #{user.username}

    // Container do conteúdo dividido em 2 colunas
    .container
      .row
        // Coluna do formulário
        .col-md-6.d-flex.align-items-center.justify-content-center
          .card.shadow-lg.w-100(style="max-width: 400px;")
            .card-body
              h2.card-title.text-center Cadastro de Animal

              if error
                .alert.alert-danger.text-center.mb-3= error
              if success
                .alert.alert-success.text-center Animal registrado com sucesso!

              form(action="/projeto1/register" method="POST")
                .mb-3
                  label.form-label(for="identifier") Identificador do animal
                  input#identifier.form-control(type="text" name="identifier" placeholder="Ex: A123" required)
                .mb-3
                  label.form-label(for="allowed") Permitido
                  select#allowed.form-select(name="allowed" required)
                    option(value="" disabled selected) Selecione uma opção
                    option(value="sim") Sim
                    option(value="nao") Não
                button.btn.btn-success.w-100(type="submit") Cadastrar
                p.text-center.mt-3
                  a(href="/") Voltar à página inicial

        // Coluna da lista de animais
        .col-md-6
          h4.mb-3 Animais Registrados
          if registros.length
            each registro in registros
                .border.p-3.mb-2.rounded.bg-light
                    strong Identificador: 
                    | #{registro.identifier}
                    br
                    strong Permitido: 
                    | #{registro.allowed}
                    br
                    strong Peso (kg): 
                    | #{registro.peso}
                    if registro.dataPesoAtualizado
                    br
                    small.text-muted Peso atualizado em: #{new Date(registro.dataPesoAtualizado).toLocaleString("pt-BR")}
                    if registro.registradoPor
                    br
                    small.text-muted Registrado por #{registro.registradoPor}
                    if registro.data
                    br
                    small.text-muted Data: #{new Date(registro.data).toLocaleString("pt-BR")}
          else
            p.text-muted Nenhum animal registrado ainda.
